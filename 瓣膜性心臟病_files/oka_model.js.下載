function isOldIE(){var odd_ie=false,_appName=window.navigator.appName,_version=window.navigator.appVersion.split(';')[1]||'';_version=_version.replace(/[ ]/g,'');if(_appName==='Microsoft Internet Explorer'&&(_version==='MSIE8.0'||_version==='MSIE7.0'||_version==='MSIE6.0')){odd_ie=true;}window.oldIE=odd_ie;return odd_ie;}$.fn.module_photo=function(){var $models=$(this);var odd_ie=window.oldIE||isOldIE();$models.each(function(){var $that=$(this),_slider=$that.data('slider'),_sliderSpeed=parseInt($that.data('sliderspeed'),10),_animateSpeed=parseInt($that.data('animatespeed'),10);var $ul=$that.find('ul'),$ul_length=$ul.length,$ctrl_tools=$that.find('.model_ctrl_tools');var _index=0;if(odd_ie&&!$that.hasClass('straight')){$ul.each(function(){var $this=$(this),$li=$this.children('li'),$li_length=$li.length;if($li.length<10){$li.css('width',(100/$li_length).toFixed(3)-0.1+'%');}});}if($ul_length>1){$ul.hide().eq(_index).show();$ctrl_tools.prepend('<a class="ctrl_left" href="#">&lsaquo;</a>');$ctrl_tools.append('<a class="ctrl_right" href="#">&rsaquo;</a>');var $ctrl_left=$ctrl_tools.find('.ctrl_left').data('dir',-1),$ctrl_right=$ctrl_tools.find('.ctrl_right').data('dir',1),$btns=$ctrl_left.add($ctrl_right);$btns.click(function(event){event.preventDefault();var $this=$(this),_dir=$this.data('dir');slider(_dir);});if(_slider){var timer;function auto(){slider(1);timer=setTimeout(auto,_sliderSpeed);}$that.mouseover(function(){clearTimeout(timer);});$that.mouseout(function(){timer=setTimeout(auto,_sliderSpeed);});timer=setTimeout(auto,_sliderSpeed);}function slider(_away){_index=(_index+_away+$ul_length)%$ul_length;$ul.eq(_index).fadeIn(_animateSpeed).siblings('ul').hide();}}});}
$.fn.oka_slider_model=function($setting){var $models=$(this);$models.each(function(){var $this=$(this),_type=$this.data('type')||0,_slider=$this.data('slider')||false,_sliderSpeed=$this.data('sliderspeed')||5000,_animateSpeed=$this.data('animatespeed')||300,_animateType=$this.data('slidertype')||0;var $slider_box=$this.find('.slider_model_box'),$slider_box_c=$slider_box.children(),$slider_box_c_length=$slider_box_c.length,$slider_box_img=$slider_box.find('img'),$slider_box_img_length=$slider_box_img.length;if($this.find('video').length||$this.find('iframe').length){_type='vedio';_slider=false;_animateType=1;}$slider_box_c.eq(0).siblings().hide();var _dom='';var _list_box='<div class="slider_list_box"><ul>';for(i=0;i<$slider_box_c.length;i++){_list_box+='<li><a href="#"><div style="background-image: url('+$slider_box_img.eq(i).attr('src')+');"></div><h5>'+$slider_box_c.eq(i).attr('title')+'</h5><p>'+$slider_box_img.eq(i).attr('alt')+'</p></a></li>';}_list_box+='</ul></div>';var _ctrl_img_box='<div class="ctrl_img_box"><ul>';for(i=0;i<$slider_box_c.length;i++){_ctrl_img_box+='<li><a href="#" style="background-image: url('+$slider_box_img.eq(i).attr('src')+');"></a></li>\n\r';}_ctrl_img_box+='</ul></div>';var _ctrl_dot_box='<div class="ctrl_dot_box"><ul>';for(i=0;i<$slider_box_c.length;i++){_ctrl_dot_box+='<li><a href="'+$slider_box_c.eq(i).attr('href')+'" title="'+$slider_box_c.eq(i).attr('title')+'"></a></li>\n\r';}_ctrl_dot_box+='</ul></div>';var _ctrl_tools='<div class="model_ctrl_tools"><a href="#" class="ctrl_left">&lsaquo;</a><a href="#" class="ctrl_right">&rsaquo;</a></div>',_introduce_box='<div class="slider_introduce_box"><h5></h5><p></p>'+_ctrl_dot_box+'</div>';switch(_type){case 1:_dom+=_ctrl_tools+'<div class="slider_bottom_box">'+_ctrl_dot_box+'</div>';break;case 2:_dom+='<div class="slider_bottom_box">'+_ctrl_dot_box+'<div class="bg_box"><h5></h5></div></div>';break;case 3:_dom+=_ctrl_tools+'<div class="slider_bottom_box"><div class="bg_box">'+_ctrl_dot_box+'<p></p></div></div>';break;case 4:_dom+='<div class="slider_bottom_box">'+_ctrl_dot_box+'</div>'+_list_box;break;case 5:_dom+='<div class="slider_bottom_box"><div class="bg_box">'+_ctrl_dot_box+'<p></p></div></div>'+_list_box;break;case 6:_dom+='<div class="slider_bottom_box"><div class="bg_box">'+_ctrl_img_box+'</div></div>';break;case 7:_dom+=_ctrl_tools+'<div class="slider_bottom_box"><div class="bg_box">'+_ctrl_img_box+'</div></div>';break;case 8:_dom+=_introduce_box;break;case 9:_dom+=_ctrl_tools+_introduce_box+'<div class="slider_bottom_box">'+_ctrl_dot_box+'<div class="bg_box"><h5></h5>'+_ctrl_dot_box+'<p></p></div></div>'+_list_box;break;case'vedio':_dom+=_ctrl_tools;break;default:_dom+='<div class="slider_bottom_box">'+_ctrl_dot_box+'</div>';}$this.append(_dom);if($slider_box_c_length<=1){return false;}var $ctrl_tools=$this.find('.model_ctrl_tools'),$bottom_box=$this.find('.bg_box'),$introduce_box=$this.find('.slider_introduce_box'),$list_box=$this.find('.slider_list_box'),$list_box_a=$list_box.find('a'),$ctrl_dot_box=$this.find('.ctrl_dot_box'),$ctrl_dot_box_a=$ctrl_dot_box.find('a'),$ctrl_img_box=$this.find('.ctrl_img_box'),$ctrl_img_box_a=$ctrl_img_box.find('a');var $ctrl_btns=$list_box_a.add($ctrl_dot_box_a).add($ctrl_img_box_a),$ctrl_title=$introduce_box.find('h5').add($bottom_box.find('h5')),$ctrl_text=$introduce_box.find('p').add($bottom_box.find('p'));var $ctrl_left=$ctrl_tools.find('.ctrl_left').data('dir',-1),$ctrl_right=$ctrl_tools.find('.ctrl_right').data('dir',1),$away_btns=$ctrl_left.add($ctrl_right);var $list_box_ul=$list_box.find('ul'),$list_box_li=$list_box.find('li'),$list_box_a=$list_box_li.find('a');var _index=0;$ctrl_btns.on('focusin click',function(event){event.preventDefault();var $this=$(this),$this_p=$this.parent('li');_index=$this_p.index();slider(_index);});$ctrl_btns.on('keydown',function(event){if(event.keyCode==13){event.preventDefault();var $this=$(this),_href=$this.attr('href'),_target=$this.attr('target')||'_blank';if(_href){window.open(_href,_target);}}});$away_btns.on('click',function(event){event.preventDefault();var $this=$(this),_dir=$this.data('dir');change_index(_dir);});$this.touchwipe({wipeLeft:function(){change_index(1);clearTimeout(timer);},wipeRight:function(){change_index(-1);clearTimeout(timer);},min_move_x:20,min_move_y:20,preventDefaultEvents:false});if(_slider){var timer;var $all_a=$this.find('a'),$last_a=$all_a.eq(-1);function auto(){change_index(1);timer=setTimeout(auto,_sliderSpeed);}$all_a.focusin(function(){clearTimeout(timer);});$last_a.focusout(function(){clearTimeout(timer);timer=setTimeout(auto,_sliderSpeed);});$this.mouseover(function(){clearTimeout(timer);});$this.mouseout(function(){clearTimeout(timer);timer=setTimeout(auto,_sliderSpeed);});timer=setTimeout(auto,_sliderSpeed);}slider(0);function change_index(_away){_index=(_index+_away+$slider_box_c_length)%$slider_box_c_length;slider(_index);}function slider(_index){var $slider_dom=$slider_box_c.eq(_index),$slider_img=$slider_box_img.eq(_index),_href=$slider_dom.attr('href')||null;if($list_box.length){var $list_box_h=$list_box.height()-$bottom_box.height(),$list_box_ul_h=$list_box_ul.height(),$list_box_slider_h=$list_box_ul_h+$list_box_li.outerHeight(true)-$list_box_h,$list_box_item=$list_box_li.eq(_index),_top=$list_box_item.position().top;if($list_box_h>$list_box_ul_h){_top=0;}else if(_top>$list_box_slider_h){for(i=1;$list_box_li.eq(i).position().top<=$list_box_slider_h;i++)_top=$list_box_li.eq(i).position().top;}$list_box_ul.stop().animate({'margin-top':-1*_top},_animateSpeed);}if(!_animateType){var _random=Math.floor(Math.random()*5)+1;slider_core(_random);}else{slider_core(_animateType);}$ctrl_title.text($slider_img.attr('title'));$ctrl_text.text($slider_img.attr('alt'));$list_box_a.removeClass('is_active').eq(_index).addClass('is_active');$ctrl_dot_box_a.removeClass('is_active').eq(_index).addClass('is_active');$ctrl_img_box_a.removeClass('is_active').eq(_index).addClass('is_active');function slider_core(_animateType){$this.find('.pic_slider_mask').remove();switch(_animateType){case 2:var $dom=$('<div class="pic_slider_mask">'),$img=$('<img src='+$slider_img.attr('src')+'>');$dom.append($img);$slider_box.append($dom);$dom.css({'position':'absolute','width':'100%','left':'0','top':'100%'});$dom.stop().animate({'top':0},_animateSpeed,function(){$slider_dom.show().siblings('a').hide();$dom.remove();$(document).scrollTop($(window).scrollTop()-1);$(document).scrollTop($(window).scrollTop()+1);});break;case 3:var $dom=$('<div class="pic_slider_mask">'),$img=$('<img src='+$slider_img.attr('src')+'>');$dom.append($img);$slider_box.append($dom);$dom.css({'position':'absolute','width':'100%','left':'100%','top':0});$dom.stop().animate({'left':0},_animateSpeed,function(){$slider_dom.show().siblings('a').hide();$dom.remove();$(document).scrollTop($(window).scrollTop()-1);$(document).scrollTop($(window).scrollTop()+1);});break;case 4:var length=12,_new_animateSpeed=_animateSpeed/length,_all_time=_animateSpeed*2-_new_animateSpeed,$img_src=$slider_img.attr('src'),$doms=$(),virtual_ani=0;for(i=0;i<length;i++){var $dom=$('<div class="pic_slider_mask">'),$img=$('<img src='+$img_src+'>');$dom.append($img);$dom.css({'position':'absolute','left':0,'top':0,'width':(100/length)*(i+1)+'%','overflow':'hidden','bottom':'100%'});$img.css({'width':(length*100)/(i+1)+'%'});$doms=$doms.add($dom);}$slider_box.append($doms);$doms.each(function(i,d){var _index=i;(function(i){$(d).stop().delay(_new_animateSpeed*i).animate({'bottom':0},_animateSpeed);})(_index)});$slider_dom.stop().animate({virtual_ani:100},_all_time,function(){$slider_dom.show().siblings('a').hide();$doms.remove();$(document).scrollTop($(window).scrollTop()-1);$(document).scrollTop($(window).scrollTop()+1);});break;case 5:var length=10,$img_src=$slider_img.attr('src'),$doms=$(),$domd=$(),virtual_ani=0;for(i=0;i<length;i++){var $dom=$('<div class="pic_slider_mask">'),$img=$('<img src='+$img_src+'>');$dom.css({'position':'absolute','left':(100/length)*i+'%','width':(100/length)+'%','overflow':'hidden'});$dom.append($img);$img.css({'width':(length*100)+'%','margin-left':-100*i+'%'});if(i%2){$dom.css({'top':0,'bottom':'100%'});$doms=$doms.add($dom);}else{$dom.css({'bottom':0,'top':'100%'});$domd=$domd.add($dom);}}$slider_box.append($doms).append($domd);$doms.stop().animate({'bottom':0},_animateSpeed);$domd.stop().animate({'top':0},_animateSpeed);$slider_dom.stop().animate({virtual_ani:100},_animateSpeed,function(){$slider_dom.show().siblings('a').hide();$doms.remove();$domd.remove();$(document).scrollTop($(window).scrollTop()-1);$(document).scrollTop($(window).scrollTop()+1);});break;default:$slider_dom.fadeIn(150).siblings().hide();}$(document).scrollTop($(window).scrollTop() - 1);$(document).scrollTop($(window).scrollTop() + 1);}}});}
$.fn.oka_banner_slider_model=function($setting){var $models=$(this);$models.each(function(){var $this=$(this),_slider=$this.data('slider'),_all=$this.data('all'),_sliderSpeed=$this.data('sliderspeed')||5000,_animateSpeed=$this.data('animatespeed'),$mask=$this.find('.banner_mask'),$ul=$mask.children('ul');$ul.children('li').each(function(){var $this=$(this);if($this.css('display')==='none'){$this.remove();}});var $li=$ul.children('li'),$li_length=$li.length,$ctrl_tools=$this.find('.model_ctrl_tools');var $slider_dom=$();var $mask_width=$mask.width(),$li_width=$li.width(),$li_all_width=$li_width*$li_length;if($li_all_width-$li_length>=$mask_width){$ctrl_tools.prepend('<a class="ctrl_left" title="上一則" href="#">&lsaquo;</a>');$ctrl_tools.append('<a class="ctrl_right" title="下一則" href="#">&rsaquo;</a>');}else{return false;}var $ctrl_left=$ctrl_tools.find('.ctrl_left').data('dir',0),$ctrl_right=$ctrl_tools.find('.ctrl_right').data('dir',1),$btns=$ctrl_left.add($ctrl_right);$btns.click(function(event){event.preventDefault();var $this=$(this),_dir=$this.data('dir');slider(_dir);});$this.touchwipe({wipeLeft:function(){slider(1);clearTimeout(timer);},wipeRight:function(){slider(0);clearTimeout(timer);},min_move_x:20,min_move_y:20,preventDefaultEvents:false});if(_slider){var timer;function auto(){slider(1);timer=setTimeout(auto,_sliderSpeed);}$li.focusin(function(){clearTimeout(timer);});$this.mouseover(function(){clearTimeout(timer);});$this.mouseout(function(){timer=setTimeout(auto,_sliderSpeed);});$ctrl_right.focusout(function(){timer=setTimeout(auto,_sliderSpeed);});timer=setTimeout(auto,_sliderSpeed);}function slider(_away){$slider_dom=$();$mask_width=$mask.width();$li_width=$li.width();$li_all_width=$li_width*$li_length;if($li_all_width-$li_length>=$mask_width){$ctrl_tools.show();var _offset='-100%',_num=Math.round($mask_width/$li_width);if(!_all){_offset='-'+(100/_num)+'%';_num=1;}$li=$ul.children('li');if(_away){for(i=0;i<_num;i++){$slider_dom=$slider_dom.add($li.eq(i));}$ul.stop().animate({'margin-left':_offset},_animateSpeed,function(){$slider_dom.appendTo($ul);$ul.css('margin-left',0);});}else{for(i=-1;i>=-1*_num;i--){$slider_dom=$slider_dom.add($li.eq(i));}$ul.css('margin-left',_offset);$slider_dom.prependTo($ul);$ul.stop().animate({'margin-left':0},_animateSpeed);}}else{$ctrl_tools.hide();}}});}
$.fn.marquee=function($setting){var $models=$(this);$models.each(function(){var $this=$(this),_sliderSpeed=$this.data('sliderspeed'),_animateSpeed=$this.data('animatespeed'),$box=$this.find('.marquee_box'),$ul=$box.find('ul'),$li=$box.find('li'),$li_length=$li.length,$li_h=$li.eq(0).outerHeight(true);$box.css({'height':$li_h});$li.css({'display':'block'})
function marquee(){$ul.animate({'margin-top':-1*$li_h},_animateSpeed,function(){$li.eq(0).appendTo($ul);$ul.css('margin-top',0);});$li=$box.find('li');}var timer;function auto(){marquee();timer=setTimeout(auto,_sliderSpeed);}$this.mouseover(function(){clearTimeout(timer);});$this.mouseout(function(){clearTimeout(timer);timer=setTimeout(auto,_sliderSpeed);});timer=setTimeout(auto,_sliderSpeed);});}
$.fn.main_menu=function($setting){var $this=$(this),$li=$this.children('li'),$li_length=$li.length,odd_ie=window.oldIE||isOldIE(),$a=$this.find('.menu').children('a'),$all_a=$this.find('a'),$submenuarea=$this.find('.submenuarea,.submenuarea2'),$submenuarea_a=$submenuarea.find('a');if($this.attr('id')==='menu'){$all_a.each(function(){var $this=$(this);if($this.data('pic')){var _src=$this.data('pic');$this.html('<img src="'+_src+'">');var $img=$this.find('img');if($this.data('hover-pic')){var _hover_src=$this.data('hover-pic');$this.mouseenter(function(){$img.attr('src',_hover_src);});$this.mouseleave(function(){$img.attr('src',_src);});}}});if(odd_ie&&$li.css('float')&&$li.css('float')!=='none'&&$li_length>6){$li.css('width',100/$li.length+'%');}$submenuarea.stop().hide(0);$a.focus(function(){$submenuarea.hide(0);$(this).closest('li').find('.submenuarea,.submenuarea2').stop().fadeIn(150);});$all_a.eq(-1).blur(function(){$submenuarea.stop().fadeOut(150,function(){$submenuarea.css('overflow','visible');});});$li.mouseenter(function(){$(this).find('.submenuarea,.submenuarea2').stop().fadeIn(150);});$li.mouseleave(function(){$submenuarea.stop().fadeOut(150,function(){$submenuarea.css('overflow','visible');});});}else if($this.attr('id')==='menu2'){var _className='is-open';$li.each(function(){var $this=$(this);if($this.find('.submenuarea,.submenuarea2').length){$this.addClass('is-parent');}});$next_a=$this.find('.is-parent').find('.menu a');$next_a.on('click focusin',function(evt){evt.preventDefault();var $this=$(this);$this.trigger('menu_open');});$next_a.on('menu_open',function(){var $this=$(this),$a_parent_li=$this.closest('li');$li.removeClass(_className);$a_parent_li.addClass(_className);});}}
$.fn.oka_tab_model=function(setting){var $this=$(this),$set=setting||{};$this.each(function(){var $this=$(this),$a=$this.find('a'),$hrefs=$('');if($a.length<=1){$a.addClass('tabs_yes');}else{$a.each(function(i){var $href=$($(this).attr('href')),$target_last_a=$href.find('a').eq(-1);$hrefs=$hrefs.add($href);$href.hide();if((i+1)<$a.length){$target_last_a.on('keydown',function(event){if(event.keyCode==9){event.preventDefault();$a.eq(i+1).focus();}});}});$a.on('keydown focus',function(event){var $this=$(this),_index=$this.closest('li').index(),$target=$($this.attr('href')),$target_a=$target.find('a'),$target_first_a=$target_a.eq(0);if(event.keyCode==9){event.preventDefault();$target_first_a.focus();}});$a.on('changeTab',function(event){event.preventDefault();var $this=$(this),$href=$($this.attr('href'));$a.removeClass('tabs_yes');$this.addClass('tabs_yes');$a.parent().removeClass('tabs_yes');$this.parent().addClass('tabs_yes');$hrefs.hide();$href.show();});$a.on('click',function(event){event.preventDefault();$(this).trigger('changeTab');});$a.on('focusin',function(event){$(this).trigger('changeTab');});$a.eq(0).trigger('changeTab');}});}
$.fn.oka_keyword_model=function(setting){var $this=$(this),$set=setting||{},$txt=$(this).find('input[type="text"]'),$ul=$(this).find('ul'),$Words=$ul.find('a');var isOverUl=false;$txt.keyup(function(){$ul.show();doSearch($txt.val());});$Words.click(function(e){e.preventDefault();$txt.val($(this).html());$ul.hide();});$ul.mouseover(function(){isOverUl=true;});$ul.mouseleave(function(){isOverUl=false;});$txt.focusout(function(){if(!isOverUl){$ul.hide();}});function doSearch(keyWord){keyWord=keyWord.toLowerCase();$ul.find('li').each(function(){var Word=$(this).find('a').html().toLowerCase();
$(this).hide();if(Word.indexOf(keyWord)>-1){$(this).show();}});}}
$(function(){setTimeout(loadMenu_t,1E3);function loadMenu_t(){var $menubg=$(".menubg"),$menuarea=$menubg.find(".menuarea"),$menu=$("#menu");if(!$menu.length)return false;var $menu_h=$menuarea.height(),$menu_t=$menu.offset().top,_class_name="is-fixed";$(window).on("scroll resize",function(){var $this=$(this),$this_Top=$this.scrollTop();if($this_Top>$menu_t){$menubg.height($menu_h);$menubg.addClass(_class_name)}else{$menubg.css({"height":"auto"});$menubg.removeClass(_class_name)}}).scroll()}});$(function () { var $body = $('body'), $font_size_btn = $('.fontlevel').find('a'), _font_size = 'm'; if ($.cookie && $.cookie('font_size')) { _font_size = $.cookie('font_size') } $font_size_btn.click(function (evt) { evt.preventDefault(); var $this = $(this), _font_size = $this.data('font-size'); $font_size_btn.removeClass('is_active'); $this.addClass('is_active'); $.cookie('font_size', _font_size); $body.attr('class', 'font-size-' + _font_size); }); $font_size_btn.filter('[data-font-size="' + _font_size + '"]').click(); }); $(function (i) { $('[data-function]').each(function () { $(this)[$(this).data('function')](); }); }); $(function () { $('body').attr('data-js', true); });